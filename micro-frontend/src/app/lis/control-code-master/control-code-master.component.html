<div class="main-container">
    <app-top-header></app-top-header>
    <app-navigation-header></app-navigation-header>
    <app-title-header
      [title]="'LIS'"
      [title2]="'Control Code Master'"      
      [isShowPrintButton]="true"
      [isShowSaveButton]="true"
      [isShowBarcodePrintButton]="true"
      [isShowImportButton]="true"
      [isShowExportButton]="true"
      [isShowClearDataButton]="true"
    ></app-title-header>
  
    <div class="filter-container">
      <form [formGroup]="filterForm">
        <div class="filter-container-left">
          <div class="input-container second ">
            <app-input
            formControlName="equipmentCode"
            [type]="'IDInput'"
            [title]="'Equipment'"
            [idPlaceholder]="'12'"
            [placeholder]="'Equipment'"
          ></app-input>
          </div>
          <div class="input-container second">
            <app-input
            formControlName="controlCode"
            [type]="'IDInput'"
            [title]="'Control Code'"
            [idPlaceholder]="'12'"
            [placeholder]="'Control Code'"
            (helpButton)="openControlCode()"
          ></app-input>
          </div>
          <div class="input-container lot">
              <app-search-bar
              formControlName="lotNo"            
              [title]="'Lot No'"            
              [placeholder]="'Lot No.'"
              (click)="openLot()"
              ></app-search-bar>
            </div>
            
            <div class="input-container second">
              <app-date
              formControlName="expiryDate"
              [title]="'Expiry Date'"            
            ></app-date>
            </div>
            <div class="input-container radio">
            <app-radio
              formControlName="status"
              [title]="'Status'"
              [radioList]="[
                { label: 'Active', value: 'active' },
                { label: 'Inactive', value: 'inactive' }
              ]"
            ></app-radio>
          </div>
            <div class="input-container button">
                <app-button
                [title]="'Get From Barcode'"
                [type]="'secondarySmallButton'"                
              >
              </app-button>
          </div>
            <div class="input-container button">
                <app-button
                [title]="'Add Commponents'"
                (click)="openAddComponent()"
                [type]="'secondarySmallButton'"                
              >
              </app-button>
          </div>
            <div class="input-container button">
                <app-button
                [title]="'Copy From'"
                [type]="'secondarySmallButton'"                
              >
              </app-button>
          </div>
        </div>
      </form>
    </div>
  
    <div class="table-container">
      <div class="table-full padding-right-12">
        <table
          mat-table
          #table1
          [dataSource]="CntrlCodeMasterData"
          class="mat-elevation-z8"
        >
          <ng-container matColumnDef="compCode">
            <th mat-header-cell *matHeaderCellDef>Component Code</th>
  
            <td mat-cell *matCellDef="let element; let i = index">
              @if(i === 0){
              <ng-container>
                <form [formGroup]="cntrlCodeMaster" class="table-input-container w-100">
                  <app-input formControlName="compCode" ></app-input>
                </form>
              </ng-container>
              }
              <div class="td-container">
                {{ element.compCode }}
              </div>
            </td>
          </ng-container>
  
          <ng-container matColumnDef="compDesc">
            <th mat-header-cell *matHeaderCellDef>Component Name</th>
            <td mat-cell *matCellDef="let element; let i = index" class="w-50">
              <ng-container>
                @if(i === 0){
                <ng-container>
                  <form [formGroup]="cntrlCodeMaster" class="table-input-container">
                    <div class="w-75">
  
                    <app-input formControlName="compDesc"></app-input>
                  </div>
                  </form>
                </ng-container>
                }
                <div class="td-container">                
                  {{ element.compDesc }}                  
                </div>
              </ng-container>
            </td>
          </ng-container>
          <ng-container matColumnDef="unit">
            <th mat-header-cell *matHeaderCellDef>Unit</th>
            <td mat-cell *matCellDef="let element; let i = index">
              <ng-container>
                @if(i === 0){
                <ng-container>
                  <form [formGroup]="cntrlCodeMaster" class="table-input-container">
                    <app-input
                      formControlName="unit"                      
                    ></app-input>
                  </form>
                </ng-container>
                }
                <div class="td-container">
                  {{ element.unit }}
                </div>
              </ng-container>
            </td>
          </ng-container>
          <ng-container matColumnDef="low">
            <th mat-header-cell *matHeaderCellDef>Low</th>
            <td mat-cell *matCellDef="let element; let i = index">
              <ng-container>
                @if(i === 0){
                <ng-container>
                  <form [formGroup]="cntrlCodeMaster" class="table-input-container">
                    <app-input
                      formControlName="low"                      
                    ></app-input>
                  </form>
                </ng-container>
                }
                <div class="td-container">
                    @if(element.isEdit){
                        <ng-container>
                          <app-input [(ngModel)]="element.low"></app-input>
                        </ng-container>
                        }@else{
                        {{ element.low }}
                        }
                </div>
              </ng-container>
            </td>
          </ng-container>
          <ng-container matColumnDef="high">
            <th mat-header-cell *matHeaderCellDef>High</th>
            <td mat-cell *matCellDef="let element; let i = index">
              <ng-container>
                @if(i === 0){
                <ng-container>
                  <form [formGroup]="cntrlCodeMaster" class="table-input-container">
                    <app-input
                      formControlName="high"                      
                    ></app-input>
                  </form>
                </ng-container>
                }
                <div class="td-container">
                    @if(element.isEdit){
                        <ng-container>
                          <app-input [(ngModel)]="element.high"></app-input>
                        </ng-container>
                        }@else{
                        {{ element.high }}
                        }
                </div>
              </ng-container>
            </td>
          </ng-container>
          <ng-container matColumnDef="mean">
            <th mat-header-cell *matHeaderCellDef>Mean</th>
            <td mat-cell *matCellDef="let element; let i = index">
              <ng-container>
                @if(i === 0){
                <ng-container>
                  <form [formGroup]="cntrlCodeMaster" class="table-input-container">
                    <app-input
                      formControlName="mean"                      
                    ></app-input>
                  </form>
                </ng-container>
                }
                <div class="td-container">
                    @if(element.isEdit){
                        <ng-container>
                          <app-input [(ngModel)]="element.mean"></app-input>
                        </ng-container>
                        }@else{
                        {{ element.mean }}
                        }
                </div>
              </ng-container>
            </td>
          </ng-container>
          <ng-container matColumnDef="standardDeviation">
            <th mat-header-cell *matHeaderCellDef>Standard Deviation</th>
            <td mat-cell *matCellDef="let element; let i = index">
              <ng-container>
                @if(i === 0){
                <ng-container>
                  <form [formGroup]="cntrlCodeMaster" class="table-input-container">
                    <app-input
                      formControlName="st_Deviation"                      
                    ></app-input>
                  </form>
                </ng-container>
                }
                <div class="td-container">
                    @if(element.isEdit){
                        <ng-container>
                          <app-input [(ngModel)]="element.standardDeviation"></app-input>
                        </ng-container>
                        }@else{
                        {{ element.standardDeviation }}
                        }
                </div>
              </ng-container>
            </td>
          </ng-container>

          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let element; let i = index">
              @if(i === 0){
              <div class="table-input-container">
                <img
                  class="img-button"
                  (click)="addData()"
                  src="assets/svg images/Add.svg"
                />
              </div>
              }
              <div class="td-container">
                <img
                  class="img-button"
                  *ngIf="!element.isNew && !element.isEdit"
                  (click)="editRow(element)"
                  src="assets/svg images/Pen 2.svg"
                />
                <img
                  class="img-button"
                  *ngIf="element.isNew"
                  (click)="deleteRow(i)"
                  src="assets/svg images/Trash Bin Trash.svg"
                />
                <img
                  class="img-button"
                  *ngIf="!element.isNew && element.isEdit"
                  (click)="saveRow(element)"
                  src="assets/svg images/save.svg"
                />
              </div>
            </td>
          </ng-container>
  
          <tr mat-header-row *matHeaderRowDef="displayColumns"></tr>
          <tr
            mat-row
            *matRowDef="let row; columns: displayColumns; let i = index"
          ></tr>
        </table>
      </div>
    </div>
  </div>
  